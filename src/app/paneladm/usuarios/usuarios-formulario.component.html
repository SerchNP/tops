<h5>{{titulo}}</h5>
<hr>
<br/>
<form novalidate="novalidate" [formGroup]="formaUsuarios" (ngSubmit)="guardar()">
    <div formGroupName="usuario" class="form-group">
        <div class="form-group row">
            <label for="username" class="col-sm-2 col-form-label text-right">Usuario</label>
            <div class="col-sm-2">
                <input class="form-control" type="text" formControlName="username" [ngClass]="{'is-invalid': (formaUsuarios.touched && formaUsuarios.get('usuario.username').invalid)}">
                <!--[attr.disabled]="accion !== 'I'"-->
                <div *ngIf="(formaUsuarios.touched && formaUsuarios.controls['usuario'].controls['username'].errors?.required)" class="invalid-feedback">Este campo es requerido</div>
            </div>
        </div>
        <div class="form-group row">
            <label for="nombre" class="col-sm-2 col-form-label text-right">Nombre</label>
            <div class="col-sm-1">
                <input class="form-control" type="text" formControlName="titulo" aria-describedby="tituloHelp" autocomplete="given-name">
                <small id="tituloHelp" class="form-text text-muted">Título</small>
            </div>
            <div class="col-sm-3">
                <input class="form-control" type="text" formControlName="nombre" aria-describedby="nombreHelp" autocomplete="given-name" [ngClass]="{'is-invalid': (formaUsuarios.touched && formaUsuarios.get('usuario.nombre').invalid)}">
                <small id="nombreHelp" class="form-text text-muted">Nombre(s)</small>
                <div *ngIf="(formaUsuarios.touched && formaUsuarios.controls['usuario'].controls['nombre'].errors?.required)" class="invalid-feedback">Este campo es requerido</div>
            </div>
            <div class="col-sm-3">
                <input class="form-control" type="text" formControlName="paterno" aria-describedby="paternoHelp" autocomplete="given-name" [ngClass]="{'is-invalid': (formaUsuarios.touched && formaUsuarios.get('usuario.paterno').invalid)}">
                <small id="paternoHelp" class="form-text text-muted">Primer Apellido</small>
                <div *ngIf="(formaUsuarios.touched && formaUsuarios.controls['usuario'].controls['paterno'].errors?.required)" class="invalid-feedback">Este campo es requerido</div>
            </div>
            <div class="col-sm-3">
                <input class="form-control" type="text" formControlName="materno" aria-describedby="maternoHelp" autocomplete="given-name">
                <small id="maternoHelp" class="form-text text-muted">Segundo Apellido</small>
            </div>
        </div>
        <div class="form-group row">
            <label for="email" class="col-sm-2 col-form-label text-right">Correo Electrónico</label>
            <div class="col-sm-4">
                <input class="form-control" type="text" formControlName="email" aria-describedby="emailHelp" autocomplete="given-name" [ngClass]="{'is-invalid': (formaUsuarios.touched && formaUsuarios.controls['usuario'].errors?.correoValidator)}">
                <small id="emailHelp" class="form-text text-muted">Principal</small>
                <div *ngIf="(formaUsuarios.touched && formaUsuarios.controls['usuario'].errors?.correoValidator)" class="invalid-feedback">Formato incorrecto</div>
            </div>
            <div class="col-sm-3">
                <input class="form-control" type="text" formControlName="email2" aria-describedby="email2Help" autocomplete="given-name" [ngClass]="{'is-invalid': (formaUsuarios.touched && formaUsuarios.controls['usuario'].errors?.correo2Validator)}">
                <small id="email2Help" class="form-text text-muted">Adicional 1</small>
                <div *ngIf="(formaUsuarios.touched && formaUsuarios.controls['usuario'].errors?.correo2Validator)" class="invalid-feedback">Formato incorrecto</div>
            </div>
            <div class="col-sm-3">
                <input class="form-control" type="text" formControlName="email3" aria-describedby="email3Help" autocomplete="given-name" [ngClass]="{'is-invalid': (formaUsuarios.touched && formaUsuarios.controls['usuario'].errors?.correo3Validator)}">
                <small id="email3Help" class="form-text text-muted">Adicional 2</small>
                <div *ngIf="(formaUsuarios.touched && formaUsuarios.controls['usuario'].errors?.correo3Validator)" class="invalid-feedback">Formato incorrecto</div>
            </div>
        </div>
        <div class="form-group row">
            <label for="area" class="col-sm-2 col-form-label text-right">Área</label>
            <div class="col-sm-10">
                <select class="form-control" name="area" formControlName="area" aria-describedby="areaHelp" [ngStyle]="{'border-color': ((formaUsuarios.touched && area.invalid) ? '#dc3545' : '#ced4da')}">
					<option *ngFor="let area of areas" value="{{area.id}}">{{area.name}}</option>
				</select>
                <small id="areaHelp" class="form-text text-muted">Área de Trabajo</small>
                <div *ngIf="(formaUsuarios.touched && area.invalid)" class="invalid-feedback" style="display: block">Este campo es requerido</div>
            </div>
        </div>
        <div class="form-group row">
            <label for="puesto" class="col-sm-2 col-form-label text-right">Puesto</label>
            <div class="col-sm-10">
                <select class="form-control" name="puesto" formControlName="puesto" aria-describedby="puestoHelp" [ngStyle]="{'border-color': ((formaUsuarios.touched && puesto.invalid) ? '#dc3545' : '#ced4da')}">
					<option *ngFor="let puesto of puestos" value="{{puesto.id}}">{{puesto.name}}</option>
				</select>
                <small id="puestoHelp" class="form-text text-muted">Puesto de Trabajo</small>
                <div *ngIf="(formaUsuarios.touched && puesto.invalid)" class="invalid-feedback" style="display: block">Este campo es requerido</div>
            </div>
        </div>
        <div class="form-group row">
            <label for="tipo" class="col-sm-2 col-form-label text-right">Tipo de Usuario</label>
            <div class="col-sm-3">
                <select class="form-control" name="tipo" formControlName="tipo" aria-describedby="tipoHelp" [ngStyle]="{'border-color': ((formaUsuarios.touched && tipo.invalid) ? '#dc3545' : '#ced4da')}">
					<option value="A" *ngIf="_accesoService.tipoUsuario() === 'A'">Administrador</option>
					<option value="C">Coordinador</option>
					<option value="N">Normal</option>
				</select>
                <small id="tipoHelp" class="form-text text-muted">Tipo de Usuario</small>
                <div *ngIf="(formaUsuarios.touched && tipo.invalid)" class="invalid-feedback" style="display: block">Este campo es requerido</div>
            </div>
        </div>
    </div>
    <div formGroupName="matriz" class="form-group">
        <div class="card border-secondary bg-light" id="matriz">
            <div class="card-header">Matriz de Responsabilidades</div>
            <div class="card-body" id="matriz_body">
                <div class="row">
                    <div class="col-md-3" id="columna1">
                        <ul class="list-group">
                            <li class="list-group-item">
                                Contexto
                                <div class="material-switch pull-right">
                                    <input id="contexto" name="contexto" formControlName="contexto" type="checkbox">
                                    <label for="contexto" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Liderazgo
                                <div class="material-switch pull-right">
                                    <input id="liderazgo" name="liderazgo" formControlName="liderazgo" type="checkbox">
                                    <label for="liderazgo" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Riesgo
                                <div class="material-switch pull-right">
                                    <input id="riesgo" name="riesgo" formControlName="riesgo" type="checkbox">
                                    <label for="riesgo" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Oportunidad
                                <div class="material-switch pull-right">
                                    <input id="oportunidad" name="oportunidad" formControlName="oportunidad" type="checkbox">
                                    <label for="oportunidad" class="label-primary"></label>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-3" id="columna2">
                        <ul class="list-group">
                            <li class="list-group-item">
                                Infraestructura
                                <div class="material-switch pull-right">
                                    <input id="infraestructura" name="infraestructura" formControlName="infraestructura" type="checkbox">
                                    <label for="infraestructura" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Clima Laboral
                                <div class="material-switch pull-right">
                                    <input id="clima" name="clima" formControlName="clima" type="checkbox">
                                    <label for="clima" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Capacitación
                                <div class="material-switch pull-right">
                                    <input id="capacitacion" name="capacitacion" formControlName="capacitacion" type="checkbox">
                                    <label for="capacitacion" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Control de Información Documental
                                <div class="material-switch pull-right">
                                    <input id="control" name="control" formControlName="control" type="checkbox">
                                    <label for="control" class="label-primary"></label>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-3" id="columna3">
                        <ul class="list-group">
                            <li class="list-group-item">
                                Salida No Conforme
                                <div class="material-switch pull-right">
                                    <input id="salidanc" name="salidanc" formControlName="salidanc" type="checkbox">
                                    <label for="salidanc" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Quejas
                                <div class="material-switch pull-right">
                                    <input id="quejas" name="quejas" formControlName="quejas" type="checkbox">
                                    <label for="quejas" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Satisfacción de Usuarios
                                <div class="material-switch pull-right">
                                    <input id="satisfaccion" name="satisfaccion" formControlName="satisfaccion" type="checkbox">
                                    <label for="satisfaccion" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Indicadores
                                <div class="material-switch pull-right">
                                    <input id="indicadores" name="indicadores" formControlName="indicadores" type="checkbox">
                                    <label for="indicadores" class="label-primary"></label>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-3" id="columna4">
                        <ul class="list-group">
                            <li class="list-group-item">
                                Auditor
                                <div class="material-switch pull-right">
                                    <input id="auditor" name="auditor" formControlName="auditor" type="checkbox">
                                    <label for="auditor" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Revisión por la Dirección
                                <div class="material-switch pull-right">
                                    <input id="revision" name="revision" formControlName="revision" type="checkbox">
                                    <label for="revision" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                No Conformidades
                                <div class="material-switch pull-right">
                                    <input id="noconf" name="noconf" formControlName="noconf" type="checkbox">
                                    <label for="noconf" class="label-primary"></label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                Mejora Continua
                                <div class="material-switch pull-right">
                                    <input id="mejora" name="mejora" formControlName="mejora" type="checkbox">
                                    <label for="mejora" class="label-primary"></label>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="text-center">
        <button type="submit" class="btn btn-outline-primary"><!--[disabled]="!formaUsuarios.valid"-->
				<i class="fa fa-save"></i>
				Guardar
			</button>
        <a (click)="cancelar()" class="btn btn-outline-danger">Cancelar</a>
    </div>
</form>